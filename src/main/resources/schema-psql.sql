-- BUILDINGS TABLE
CREATE TABLE IF NOT EXISTS BUILDINGS
(
    BUILDING_ID
    SERIAL
    PRIMARY
    KEY,
    NAME
    VARCHAR
(
    50
) NOT NULL,
    ADDRESS VARCHAR
(
    255
) NOT NULL
    );

-- ROOMS TABLE
CREATE TABLE IF NOT EXISTS ROOMS
(
    ROOM_ID
    SERIAL
    PRIMARY
    KEY,
    ROOM_NAME
    VARCHAR
(
    255
),
    ROOM_NUMBER VARCHAR
(
    100
) NOT NULL,
    ROOM_CAPACITY INT NOT NULL,
    BUILDING_ID INT NOT NULL,
    CONSTRAINT FK_ROOMS_BUILDING FOREIGN KEY
(
    BUILDING_ID
)
    REFERENCES BUILDINGS
(
    BUILDING_ID
)
    ON DELETE CASCADE
    ON UPDATE CASCADE
    );

-- EVENTS TABLE
CREATE TABLE IF NOT EXISTS EVENTS
(
    EVENT_ID
    SERIAL
    PRIMARY
    KEY,
    EVENT_NAME
    VARCHAR
(
    100
) NOT NULL,
    START_DATE_TIME TIMESTAMP NOT NULL,
    END_DATE_TIME TIMESTAMP NOT NULL
    );

-- EVENT_ROOMS TABLE
CREATE TABLE IF NOT EXISTS EVENTS_ROOMS
(
    EVENT_ROOMS_ID
    SERIAL
    PRIMARY
    KEY,
    EVENT_ID
    INT
    NOT
    NULL,
    ROOM_ID
    INT
    NOT
    NULL,
    CONSTRAINT
    FK_EVENT_ROOMS_EVENT
    FOREIGN
    KEY
(
    EVENT_ID
)
    REFERENCES EVENTS
(
    EVENT_ID
)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
    CONSTRAINT FK_EVENT_ROOMS_ROOM FOREIGN KEY
(
    ROOM_ID
)
    REFERENCES ROOMS
(
    ROOM_ID
)
    ON DELETE CASCADE
    ON UPDATE CASCADE
    );